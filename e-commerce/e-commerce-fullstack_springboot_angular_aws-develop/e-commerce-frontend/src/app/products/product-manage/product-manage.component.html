<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>üõ†Ô∏è Manage My Products</h2>
    <a routerLink="/products/create" class="btn btn-success">
      <i class="bi bi-plus-circle me-2"></i>Add New Product
    </a>
  </div>

  <!-- üîΩ Page Size Selector -->
  <div class="d-flex justify-content-end align-items-center mb-3">
    <label for="pageSizeSelect" class="form-label me-2 mb-0 fw-semibold">Show:</label>
    <select
      id="pageSizeSelect"
      class="form-select form-select-sm w-auto"
      [(ngModel)]="size"
      (change)="onPageSizeChange()"
    >
      <option *ngFor="let s of pageSizeOptions" [value]="s">{{ s }}</option>
    </select>
    <span class="ms-2">per page</span>
  </div>

  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-primary"></div>
    <p class="mt-2">Loading your products...</p>
  </div>

  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <div class="row row-cols-1 row-cols-md-3 g-4" *ngIf="!loading && products.length > 0">
    <div class="col" *ngFor="let product of products">
      <div class="card h-100 shadow-sm">
        <img [src]="product.productImage || 'https://via.placeholder.com/300'" class="card-img-top" alt="{{ product.productName }}">
        <div class="card-body">
          <h5 class="card-title">{{ product.productName }}</h5>
          <p class="card-text text-muted">{{ product.description }}</p>
          <div class="row text-center">
            <div class="col-4">
              <small class="text-muted">Price</small>
              <div class="fw-bold text-success">‚Çπ{{ product.price }}</div>
            </div>
            <div class="col-4">
              <small class="text-muted">Stock</small>
              <div class="fw-bold" [class.text-danger]="product.quantity === 0" [class.text-success]="product.quantity > 0">
                {{ product.quantity || 0 }}
              </div>
            </div>
            <div class="col-4">
              <small class="text-muted">Discount</small>
              <div class="fw-bold text-warning">{{ product.discount || 0 }}%</div>
            </div>
          </div>
        </div>
        <div class="card-footer d-flex justify-content-between">
          <button class="btn btn-outline-primary btn-sm" [routerLink]="['/products/edit', product.productId]">
            <i class="bi bi-pencil me-1"></i>Edit
          </button>
          <button class="btn btn-outline-danger btn-sm" (click)="deleteProduct(product.productId)">
            <i class="bi bi-trash me-1"></i>Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && products.length === 0" class="text-center text-muted py-4">
    <i class="bi bi-box-seam fs-1 text-muted"></i>
    <h5 class="mt-3">No products found</h5>
    <p>You haven't added any products yet. Start by creating your first product!</p>
    <a routerLink="/products/create" class="btn btn-primary">
      <i class="bi bi-plus-circle me-2"></i>Create First Product
    </a>
  </div>

  <!-- üìÑ Pagination -->
  <nav *ngIf="totalPages > 1 && !loading" class="mt-4">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="page === 0">
        <button class="page-link" (click)="previousPage()" [disabled]="page === 0">Previous</button>
      </li>
      <li class="page-item" *ngFor="let pageNum of [].constructor(totalPages); let i = index" [class.active]="page === i">
        <button class="page-link" (click)="page = i; fetchMyProducts()">{{ i + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="page === totalPages - 1">
        <button class="page-link" (click)="nextPage()" [disabled]="page === totalPages - 1">Next</button>
      </li>
    </ul>
  </nav>
</div>
  