<div class="container py-4">
  <h3>Users</h3>
  <div *ngIf="loading">Loading...</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <table *ngIf="!loading" class="table table-striped align-middle">
    <thead>
      <tr>
        <th>Avatar</th>
        <th>Name</th>
        <th>Email</th>
        <th>Roles</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let u of users">
        <td>
          <img [src]="u.profileImage || 'https://via.placeholder.com/40'" alt="avatar" width="40" height="40" class="rounded-circle" />
        </td>
        <td>{{ u.userName }}</td>
        <td>{{ u.email }}</td>
        <td>
          <span *ngFor="let r of (u.roles || [])" class="badge bg-secondary me-1">{{ r.roleName || r.name || r }}</span>
        </td>
        <td>
          <span class="badge" [ngClass]="u.active ? 'bg-success' : 'bg-danger'">{{ u.active ? 'Active' : 'Inactive' }}</span>
        </td>
        <td>
          <button class="btn btn-sm btn-outline-secondary me-2" (click)="toggleActive(u)">{{ u.active ? 'Deactivate' : 'Activate' }}</button>
          <button class="btn btn-sm btn-outline-danger" (click)="deleteUser(u.userId)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


